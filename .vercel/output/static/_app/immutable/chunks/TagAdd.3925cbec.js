import{I as $,s as ee,f as b,a as P,l as J,g as y,h as A,d as w,c as D,C as q,m as z,r as ie,j as f,i as j,u,v as F,n as Q,w as X,D as Z,x as ke,e as R,E as ve,J as Te,K as Ce,L as ae}from"./scheduler.3ec7a0a7.js";import{a as xe,S as te,i as le,f as re}from"./index.54d36a3d.js";import{w as be}from"./index.338d84dd.js";function G(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Ie(i,t){i.d(1),t.delete(i.key)}function Ee(i,t,e,s,a,c,l,n,o,r,g,p){let m=i.length,d=c.length,_=m;const x={};for(;_--;)x[i[_].key]=_;const E=[],h=new Map,v=new Map,T=[];for(_=d;_--;){const C=p(a,c,_),I=e(C);let M=l.get(I);M?s&&T.push(()=>M.p(C,t)):(M=r(I,C),M.c()),h.set(I,E[_]=M),I in x&&v.set(I,Math.abs(_-x[I]))}const k=new Set,N=new Set;function U(C){xe(C,1),C.m(n,g),l.set(C.key,C),g=C.first,d--}for(;m&&d;){const C=E[d-1],I=i[m-1],M=C.key,L=I.key;C===I?(g=C.first,m--,d--):h.has(L)?!l.has(M)||k.has(M)?U(C):N.has(L)?m--:v.get(M)>v.get(L)?(N.add(M),U(C)):(k.add(L),m--):(o(I,l),m--)}for(;m--;){const C=i[m];h.has(C.key)||o(C,l)}for(;d;)U(E[d-1]);return $(T),E}const ye=be(!1),Y=be({tagArray:null,stringField:"",stringId:""});function we(){ye.update(i=>!i)}function ce(i,t,e){const s=i.slice();return s[14]=t[e],s}function oe(i,t,e){const s=i.slice();return s[14]=t[e],s}function Ne(i){let t,e=i[2]===i[6].stringField&&fe(i);return{c(){e&&e.c(),t=R()},l(s){e&&e.l(s),t=R()},m(s,a){e&&e.m(s,a),j(s,t,a)},p(s,a){s[2]===s[6].stringField?e?e.p(s,a):(e=fe(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(s){s&&w(t),e&&e.d(s)}}}function Ae(i){let t,e,s="Tags:",a,c=G(i[4]),l=[];for(let n=0;n<c.length;n+=1)l[n]=de(oe(i,c,n));return{c(){t=b("div"),e=b("span"),e.textContent=s,a=P();for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=y(n,"DIV",{class:!0});var o=A(t);e=y(o,"SPAN",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-ci7u91"&&(e.textContent=s),a=D(o);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(w),this.h()},h(){f(e,"class","text-sm text-gray-500 mr-2"),f(t,"class","px-2 flex mb-2")},m(n,o){j(n,t,o),u(t,e),u(t,a);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null)},p(n,o){if(o&16){c=G(n[4]);let r;for(r=0;r<c.length;r+=1){const g=oe(n,c,r);l[r]?l[r].p(g,o):(l[r]=de(g),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=c.length}},d(n){n&&w(t),ve(l,n)}}}function fe(i){let t,e,s="Tags:",a,c=G(i[6].tagArray),l=[];for(let n=0;n<c.length;n+=1)l[n]=ue(ce(i,c,n));return{c(){t=b("div"),e=b("span"),e.textContent=s,a=P();for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=y(n,"DIV",{class:!0});var o=A(t);e=y(o,"SPAN",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-ci7u91"&&(e.textContent=s),a=D(o);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(w),this.h()},h(){f(e,"class","text-sm text-gray-500 mr-2"),f(t,"class","px-2 flex mb-2")},m(n,o){j(n,t,o),u(t,e),u(t,a);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null)},p(n,o){if(o&64){c=G(n[6].tagArray);let r;for(r=0;r<c.length;r+=1){const g=ce(n,c,r);l[r]?l[r].p(g,o):(l[r]=ue(g),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=c.length}},d(n){n&&w(t),ve(l,n)}}}function ue(i){let t,e=i[14]+"",s;return{c(){t=b("span"),s=J(e),this.h()},l(a){t=y(a,"SPAN",{class:!0});var c=A(t);s=z(c,e),c.forEach(w),this.h()},h(){f(t,"class","text-sm text-gray-500 mr-1")},m(a,c){j(a,t,c),u(t,s)},p(a,c){c&64&&e!==(e=a[14]+"")&&Q(s,e)},d(a){a&&w(t)}}}function de(i){let t,e=i[14]+"",s;return{c(){t=b("span"),s=J(e),this.h()},l(a){t=y(a,"SPAN",{class:!0});var c=A(t);s=z(c,e),c.forEach(w),this.h()},h(){f(t,"class","text-sm text-gray-500 mr-1")},m(a,c){j(a,t,c),u(t,s)},p(a,c){c&16&&e!==(e=a[14]+"")&&Q(s,e)},d(a){a&&w(t)}}}function Se(i){let t,e,s,a,c,l,n,o,r='<img src="/copy-solid-24.png" alt="copy icon" class="w-4 h-4"/>',g,p,m,d,_,x;function E(T,k){if(T[4])return Ae;if(T[6].tagArray)return Ne}let h=E(i),v=h&&h(i);return{c(){t=b("section"),e=b("picture"),s=b("div"),a=b("img"),n=P(),o=b("button"),o.innerHTML=r,g=P(),p=b("span"),m=J(i[1]),d=P(),v&&v.c(),this.h()},l(T){t=y(T,"SECTION",{class:!0});var k=A(t);e=y(k,"PICTURE",{class:!0});var N=A(e);s=y(N,"DIV",{class:!0,role:!0,tabindex:!0});var U=A(s);a=y(U,"IMG",{src:!0,alt:!0,class:!0}),U.forEach(w),n=D(N),o=y(N,"BUTTON",{class:!0,"data-svelte-h":!0}),q(o)!=="svelte-2a8n6d"&&(o.innerHTML=r),N.forEach(w),g=D(k),p=y(k,"SPAN",{class:!0,"data-fileid":!0});var C=A(p);m=z(C,i[1]),C.forEach(w),d=D(k),v&&v.l(k),k.forEach(w),this.h()},h(){ie(a.src,c=i[0])||f(a,"src",c),f(a,"alt",l=i[1]+"/"),f(a,"class","object-cover w-full aspect-video"),f(s,"class","cursor-pointer"),f(s,"role","button"),f(s,"tabindex","0"),f(o,"class","absolute top-2 right-2 bg-white rounded-full flex items-center justify-center p-2 transition hover:bg-gray-300"),f(e,"class","aspect-video relative mb-2"),f(p,"class","p-2 text-sm text-slate-400"),f(p,"data-fileid",i[3]),f(t,"class","bg-slate-800 flex flex-col w-full rounded-md drop-shadow")},m(T,k){j(T,t,k),u(t,e),u(e,s),u(s,a),u(e,n),u(e,o),u(t,g),u(t,p),u(p,m),u(t,d),v&&v.m(t,null),_||(x=[F(s,"click",i[9]),F(s,"keydown",i[10]),F(o,"click",i[11])],_=!0)},p(T,[k]){k&1&&!ie(a.src,c=T[0])&&f(a,"src",c),k&2&&l!==(l=T[1]+"/")&&f(a,"alt",l),k&2&&Q(m,T[1]),k&8&&f(p,"data-fileid",T[3]),h===(h=E(T))&&v?v.p(T,k):(v&&v.d(1),v=h&&h(T),v&&(v.c(),v.m(t,null)))},i:X,o:X,d(T){T&&w(t),v&&v.d(),_=!1,$(x)}}}function Pe(i,t,e){let s;Z(i,Y,h=>e(6,s=h));const a=ke();let c=!1,{thumbnail:l}=t,{fileName:n}=t,{filePath:o}=t,{fileId:r}=t,{fileTags:g}=t,{url:p}=t;const m=()=>{we(),Y.set({tagArray:g,stringField:o,stringId:r})},d=async(h,v)=>{try{await navigator.clipboard.writeText(v+h)}catch(T){console.error("Unable to copy to clipboard: ",T)}c=!c,a("toast",{isVisible:c})},_=()=>m(),x=()=>m(),E=()=>d(o,p);return i.$$set=h=>{"thumbnail"in h&&e(0,l=h.thumbnail),"fileName"in h&&e(1,n=h.fileName),"filePath"in h&&e(2,o=h.filePath),"fileId"in h&&e(3,r=h.fileId),"fileTags"in h&&e(4,g=h.fileTags),"url"in h&&e(5,p=h.url)},[l,n,o,r,g,p,s,m,d,_,x,E]}class qe extends te{constructor(t){super(),le(this,t,Pe,Se,ee,{thumbnail:0,fileName:1,filePath:2,fileId:3,fileTags:4,url:5})}}function he(i,{delay:t=0,duration:e=400,easing:s=Te}={}){const a=+getComputedStyle(i).opacity;return{delay:t,duration:e,easing:s,css:c=>`opacity: ${c*a}`}}function De(i){let t,e,s,a,c;return{c(){t=b("div"),e=b("div"),s=J(i[0]),this.h()},l(l){t=y(l,"DIV",{class:!0});var n=A(t);e=y(n,"DIV",{class:!0});var o=A(e);s=z(o,i[0]),o.forEach(w),n.forEach(w),this.h()},h(){f(e,"class","bg-green-700 text-white px-5 py-2 rounded shadow-md inline-flex max-w-fit"),f(t,"class","fixed top-6 left-0 right-0 flex justify-center")},m(l,n){j(l,t,n),u(t,e),u(e,s),c=!0},p(l,[n]){(!c||n&1)&&Q(s,l[0])},i(l){c||(l&&Ce(()=>{c&&(a||(a=re(t,he,{},!0)),a.run(1))}),c=!0)},o(l){l&&(a||(a=re(t,he,{},!1)),a.run(0)),c=!1},d(l){l&&w(t),l&&a&&a.end()}}}function Me(i,t,e){let{message:s}=t;return i.$$set=a=>{"message"in a&&e(0,s=a.message)},[s]}class Fe extends te{constructor(t){super(),le(this,t,Me,De,ee,{message:0})}}function _e(i,t,e){const s=i.slice();return s[11]=t[e],s[13]=e,s}function me(i){let t,e,s,a="Add Tags",c,l,n="Type your tags, separate by comma",o,r,g,p,m,d,_,x,E,h,v,T,k,N,U="Cancel",C,I,M="Submit",L,se,S=i[2]&&ge(i);return{c(){t=b("section"),e=b("div"),s=b("h3"),s.textContent=a,c=P(),l=b("span"),l.textContent=n,o=P(),r=b("form"),g=b("div"),p=b("input"),m=P(),d=b("div"),S&&S.c(),_=P(),x=b("input"),E=P(),h=b("input"),T=P(),k=b("div"),N=b("button"),N.textContent=U,C=P(),I=b("button"),I.textContent=M,this.h()},l(V){t=y(V,"SECTION",{class:!0});var O=A(t);e=y(O,"DIV",{class:!0});var B=A(e);s=y(B,"H3",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-b0e16o"&&(s.textContent=a),c=D(B),l=y(B,"SPAN",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-1eqy8dh"&&(l.textContent=n),o=D(B),r=y(B,"FORM",{method:!0});var H=A(r);g=y(H,"DIV",{class:!0});var ne=A(g);p=y(ne,"INPUT",{type:!0,class:!0,placeholder:!0}),ne.forEach(w),m=D(H),d=y(H,"DIV",{class:!0});var K=A(d);S&&S.l(K),_=D(K),x=y(K,"INPUT",{type:!0,name:!0}),E=D(K),h=y(K,"INPUT",{type:!0,name:!0}),K.forEach(w),T=D(H),k=y(H,"DIV",{class:!0});var W=A(k);N=y(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),q(N)!=="svelte-1xp8s6y"&&(N.textContent=U),C=D(W),I=y(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),q(I)!=="svelte-1q29m77"&&(I.textContent=M),W.forEach(w),H.forEach(w),B.forEach(w),O.forEach(w),this.h()},h(){f(s,"class","text-white"),f(l,"class","text-slate-500 text-sm"),f(p,"type","text"),f(p,"class","bg-white rounded-sm w-full py-2 px-3"),f(p,"placeholder","tags 1, tags 2, tags 3..."),f(g,"class","my-4"),f(x,"type","hidden"),f(x,"name","tags"),x.value=i[2],f(h,"type","hidden"),f(h,"name","fileId"),h.value=v=i[1].stringId,f(d,"class","flex gap-2"),f(N,"type","button"),f(N,"class","bg-slate-700 px-5 py-3 rounded-md"),f(I,"type","submit"),f(I,"class","bg-black px-5 py-3 rounded-md"),f(k,"class","border-t border-slate-500/50 pt-4 mt-3 flex justify-end text-white gap-3"),f(r,"method","POST"),f(e,"class","bg-slate-800 p-5 rounded-xl w-5/6 md:w-1/2"),f(t,"class","bg-slate-900/80 fixed left-0 top-0 h-screen w-screen flex items-center justify-center")},m(V,O){j(V,t,O),u(t,e),u(e,s),u(e,c),u(e,l),u(e,o),u(e,r),u(r,g),u(g,p),ae(p,i[3]),u(r,m),u(r,d),S&&S.m(d,null),u(d,_),u(d,x),u(d,E),u(d,h),u(r,T),u(r,k),u(k,N),u(k,C),u(k,I),L||(se=[F(p,"input",i[8]),F(p,"keypress",i[4]),F(N,"click",i[6])],L=!0)},p(V,O){O&8&&p.value!==V[3]&&ae(p,V[3]),V[2]?S?S.p(V,O):(S=ge(V),S.c(),S.m(d,_)):S&&(S.d(1),S=null),O&4&&(x.value=V[2]),O&2&&v!==(v=V[1].stringId)&&(h.value=v)},d(V){V&&w(t),S&&S.d(),L=!1,$(se)}}}function ge(i){let t=[],e=new Map,s,a=G(i[2]);const c=l=>l[11];for(let l=0;l<a.length;l+=1){let n=_e(i,a,l),o=c(n);e.set(o,t[l]=pe(o,n))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();s=R()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);s=R()},m(l,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(l,n);j(l,s,n)},p(l,n){n&36&&(a=G(l[2]),t=Ee(t,n,c,1,l,a,e,s.parentNode,Ie,pe,s,_e))},d(l){l&&w(s);for(let n=0;n<t.length;n+=1)t[n].d(l)}}}function pe(i,t){let e,s=t[11]+"",a,c,l,n="x",o,r,g;function p(){return t[9](t[13])}return{key:i,first:null,c(){e=b("div"),a=J(s),c=P(),l=b("button"),l.textContent=n,o=P(),this.h()},l(m){e=y(m,"DIV",{class:!0});var d=A(e);a=z(d,s),c=D(d),l=y(d,"BUTTON",{type:!0,"data-svelte-h":!0}),q(l)!=="svelte-1cqwg2a"&&(l.textContent=n),o=D(d),d.forEach(w),this.h()},h(){f(l,"type","button"),f(e,"class","rounded-lg bg-slate-400 px-2 py-1"),this.first=e},m(m,d){j(m,e,d),u(e,a),u(e,c),u(e,l),u(e,o),r||(g=F(l,"click",p),r=!0)},p(m,d){t=m,d&4&&s!==(s=t[11]+"")&&Q(a,s)},d(m){m&&w(e),r=!1,g()}}}function Ve(i){let t,e=i[0]&&me(i);return{c(){e&&e.c(),t=R()},l(s){e&&e.l(s),t=R()},m(s,a){e&&e.m(s,a),j(s,t,a)},p(s,[a]){s[0]?e?e.p(s,a):(e=me(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:X,o:X,d(s){s&&w(t),e&&e.d(s)}}}function je(i,t,e){let s,a,c;Z(i,Y,_=>e(1,a=_)),Z(i,ye,_=>e(7,c=_));let l=[],n="";const o=()=>{n.trim()!==""&&!l.includes(n.toLowerCase())&&(e(2,l=[...l,n.toLowerCase()]),e(3,n=""))},r=_=>{(_.key==="Enter"||_.key===",")&&(_.preventDefault(),o())},g=_=>{l&&e(2,l=l.filter((x,E)=>E!==_)),Y.update(x=>{const E=x.tagArray??[];return _>=0&&_<E.length&&(x.tagArray=E.filter((h,v)=>v!==_)),x})},p=()=>{we(),e(2,l=[]),e(3,n="")};function m(){n=this.value,e(3,n)}const d=_=>g(_);return i.$$.update=()=>{i.$$.dirty&128&&e(0,s=c),i.$$.dirty&3&&s&&a.tagArray&&e(2,l=[...a.tagArray])},[s,a,l,n,r,g,p,c,m,d]}class Be extends te{constructor(t){super(),le(this,t,je,Ve,ee,{})}}export{qe as L,Be as T,Fe as a,G as e};
